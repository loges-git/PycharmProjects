============================= test session starts =============================
platform win32 -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0 -- C:\Python314\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\loges\PycharmProjects\release_ops_ui
collecting ... collected 2 items

tests/test_ui_integration_flows.py::test_record_approval_button_flow FAILED [ 50%]
tests/test_ui_integration_flows.py::test_load_approval_button_flow FAILED [100%]

================================== FAILURES ===================================
______________________ test_record_approval_button_flow _______________________

mock_get_head = <MagicMock name='get_remote_branch_head' id='1866611044912'>
tmp_path = WindowsPath('C:/Users/loges/AppData/Local/Temp/pytest-of-loges/pytest-6/test_record_approval_button_fl0')

    @patch("services.git_service.get_remote_branch_head")
    def test_record_approval_button_flow(mock_get_head, tmp_path):
        # 1. Setup UI context (simulated)
        approval_dir = tmp_path / "approvals"
        repo_path = tmp_path / "repo"
    
        mock_get_head.return_value = "commit_hash_123"
    
        # 2. Simulate User clicking "Record Approval"
        # This triggers create_approval_record with gathered context
        approval_file = create_approval_record(
            approval_dir=approval_dir,
            approval_id="APPROVED_Manager_Test_123",
            environment=Environment.CIT,
>           release_type=ReleaseType.GCP,
                         ^^^^^^^^^^^^^^^
            base_branch="develop",
            base_commit=mock_get_head(repo_path, "develop"),  # UI calls this
            approved_files={"script.sql": "hash_abc"},
            release_jira="JIRA-100",
            cluster="test-cluster-01",
            shared_path=str(tmp_path / "shared"),
            search_tag="tag-100"
        )
E       AttributeError: type object 'ReleaseType' has no attribute 'GCP'

tests\test_ui_integration_flows.py:22: AttributeError
_______________________ test_load_approval_button_flow ________________________

tmp_path = WindowsPath('C:/Users/loges/AppData/Local/Temp/pytest-of-loges/pytest-6/test_load_approval_button_flow0')

    def test_load_approval_button_flow(tmp_path):
        # 1. Setup existing external approval
        approval_dir = tmp_path / "approvals"
        create_approval_record(
            approval_dir=approval_dir,
            approval_id="APPROVED_External_1",
            environment=Environment.CIT,
>           release_type=ReleaseType.GCP,
                         ^^^^^^^^^^^^^^^
            base_branch="develop",
            base_commit="hash_xyz",
            approved_files={"file.sql": "hash_1"},
            release_jira="JIRA-200",
            cluster="cluster-A"
        )
E       AttributeError: type object 'ReleaseType' has no attribute 'GCP'

tests\test_ui_integration_flows.py:48: AttributeError
=========================== short test summary info ===========================
FAILED tests/test_ui_integration_flows.py::test_record_approval_button_flow
FAILED tests/test_ui_integration_flows.py::test_load_approval_button_flow - A...
============================== 2 failed in 0.11s ==============================
